(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{21:function(t,e,a){},43:function(t,e,a){},44:function(t,e,a){},45:function(t,e,a){},46:function(t,e,a){},47:function(t,e,a){},48:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a(0),o=a.n(r),s=a(3),i=a.n(s),c=(a(18),a(19),a(20),a(21),a(9)),l=a(4),u=a(5),h=a(7),m=a(6),g=a(11),d=a.n(g),p=a(8),j=a(12),b=(a(43),function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={initialValue:""},t.handleInputChange=function(e){t.setState({initialValue:e.currentTarget.value.toLowerCase()})},t.handleSubmit=function(e){e.preventDefault(),""!==t.state.initialValue.trim()?(t.props.onSubmit(t.state.initialValue.trim()),t.setState({initialValue:""})):p.b.error("Please enter your query.")},t}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsxs)("span",{className:"SearchForm-button-label",children:[Object(n.jsx)(j.a,{}),"Search"]})}),Object(n.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.initialValue,onChange:this.handleInputChange})]})})}}]),a}(r.Component));a(44),a(45);function f(t){var e=t.src,a=t.alt,r=t.largeImageUrl;return Object(n.jsx)("li",{className:"ImageGalleryItem",children:Object(n.jsx)("img",{src:e,alt:a,"data-large-url":r,className:"ImageGalleryItem-image"})})}var y=function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={imageList:[]},t}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(t,e){e.imageList!==this.props.imageList&&this.setState({imageList:this.props.imageList})}},{key:"render",value:function(){return Object(n.jsx)("ul",{className:"ImageGallery",onClick:this.props.onClick,children:this.state.imageList.map((function(t){return Object(n.jsx)(f,{src:t.webformatURL,alt:t.type,largeImageUrl:t.largeImageURL},t.id)}))})}}]),a}(r.Component);function O(t,e){var a=new URLSearchParams({q:t,page:e,per_page:12,key:"19182122-b959857203510615d63e1aa25"});return fetch("".concat("https://pixabay.com/api/?image_type=photo&orientation=horizontal&").concat(a)).then((function(e){return e.ok?e.json():Promise.reject(new Error("There are no images for your query: ".concat(t)))}))}a(46);function v(t){var e=t.onClick;return Object(n.jsx)("button",{type:"button",className:"Button",onClick:function(){e()},children:"Load more..."})}a(47);var w=document.querySelector("#modal-root"),S=function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).handleKeyDown=function(e){"Escape"===e.code&&t.props.onClose()},t.handleBackdropClick=function(e){e.currentTarget===e.target&&t.props.onClose()},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(s.createPortal)(Object(n.jsx)("div",{className:"Overlay",onClick:this.handleBackdropClick,children:Object(n.jsx)("div",{className:"Modal",children:Object(n.jsx)("img",{src:this.props.src,alt:this.props.alt})})}),w)}}]),a}(r.Component),k="idle",x="pending",C="resolved",L="rejected",I=function(t){Object(h.a)(a,t);var e=Object(m.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={searchQuery:"",page:1,imageList:[],error:null,status:k,showModal:!1,largeImageUrl:"",alt:""},t.handleFormSubmit=function(e){t.setState({searchQuery:e}),t.resetPage()},t.handleButtonClick=function(){console.log(t.state.page),t.setState({status:x}),console.log(t.state.status),O(t.state.searchQuery,t.state.page).then((function(e){if(0===e.hits.length)return p.b.error("Unfortunately, there is nothing to show...");t.setState((function(t){return{imageList:[].concat(Object(c.a)(t.imageList),Object(c.a)(e.hits)),status:C}})),console.log(t.state.imageList)})).catch((function(e){return t.setState({error:e,status:L})})).finally((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),t.setState((function(t){return{page:t.page+=1}})),console.log(t.state.status)}))},t.resetPage=function(){t.setState({page:1})},t.toggleModal=function(){t.setState((function(t){return{showModal:!t.showModal}}))},t.handleGalleryItemClick=function(e){"IMG"===e.target.nodeName&&t.setState({largeImageUrl:e.target.dataset.largeUrl,alt:e.target.alt}),t.toggleModal()},t}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(t,e){var a=this,n=e.searchQuery,r=this.state.searchQuery;n!==r&&(this.setState({status:x}),console.log(this.state.status),O(r,this.state.page).then((function(t){if(0===t.hits.length)return p.b.error("Unfortunately, there is nothing to show...");a.setState({imageList:Object(c.a)(t.hits),status:C}),console.log(a.state.imageList)})).catch((function(t){return a.setState({error:t,status:L})})).finally((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),console.log(a.state.status),a.setState((function(t){return{page:t.page+=1}}))})))}},{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(b,{onSubmit:this.handleFormSubmit}),this.state.error&&Object(n.jsx)("h1",{children:this.state.error.message}),Object(n.jsx)(y,{imageList:this.state.imageList,onClick:this.handleGalleryItemClick}),this.state.showModal&&Object(n.jsx)(S,{src:this.state.largeImageUrl,alt:this.state.alt,onClose:this.toggleModal}),this.state.status===x&&Object(n.jsx)(d.a,{type:"ThreeDots",color:"#00BFFF",height:100,width:100,timeout:3e3}),this.state.status===C&&Object(n.jsx)(v,{onClick:this.handleButtonClick}),Object(n.jsx)(p.a,{autoClose:2e3})]})}}]),a}(r.Component);i.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(I,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.d2b64a69.chunk.js.map